<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="web前端开发"><title>一个echarts柱状图实例 | 小方块的世界</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">一个echarts柱状图实例</h1><a id="logo" href="/.">小方块的世界</a><p class="description">Stay Hungry Stay Foolish</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/favorite/"><i class="fa fa-star"> 收藏夹</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">一个echarts柱状图实例</h1><div class="post-meta">Jan 16, 2020<span> | </span><span class="category"><a href="/categories/Study/">Study</a></span></div><div class="post-content"><p>这篇文章主要讲了echarts在vue+iview中的一个应用（柱状图）和在实现过程中遇到的问题，如何设置数据以及如何解决参数动态更新效果。<br><a id="more"></a></p>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>根据所选时间区间和勾选的参数要素生成响应的图表，单参数图表和多参数图表。</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><ol>
<li>时间区间格式 传给后台的值 [‘2020-01-15’, ‘2020-02-15’]</li>
<li>勾选参数：将参数的中英文字段对应做成字典，使用iview的Checkbox组件，勾选对应的参数直接获取到参数字段组成的数组，便于生成对应的报表</li>
<li>两种图表，单一元素的，多元素混合的。需要两个不同的配置项模板</li>
</ol>
<h3 id="实施"><a href="#实施" class="headerlink" title="实施"></a>实施</h3><ol>
<li><p>找模板</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单元素柱状图模板 在A，B，C 处处理数据</span></span><br><span class="line">optionTpl: &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">        text: <span class="string">''</span></span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">        trigger: <span class="string">'axis'</span>,</span><br><span class="line">        axisPointer: &#123; <span class="comment">// 坐标轴指示器，坐标轴触发有效</span></span><br><span class="line">            type: <span class="string">'shadow'</span> <span class="comment">// 默认为直线，可选为：'line' | 'shadow'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    grid: &#123;</span><br><span class="line">        left: <span class="string">'3%'</span>,</span><br><span class="line">        right: <span class="string">'4%'</span>,</span><br><span class="line">        bottom: <span class="string">'3%'</span>,</span><br><span class="line">        containLabel: <span class="literal">true</span> <span class="comment">// grid 区域是否包含坐标轴的刻度标签</span></span><br><span class="line">    &#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        data: [] <span class="comment">// A 单元素标题</span></span><br><span class="line">    &#125;,</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        data: [], <span class="comment">// B 时间轴数据 ['202001', '202002']</span></span><br><span class="line">        nameLocation: <span class="string">'end'</span>, <span class="comment">//坐标轴名称显示位置。</span></span><br><span class="line">        axisLabel: &#123; <span class="comment">//坐标轴刻度标签的相关设置。</span></span><br><span class="line">            interval: <span class="number">0</span>, <span class="comment">// 设置成 0 强制显示所有标签。如果设置为 1，表示『隔一个标签显示一个标签』，如果值为 2，表示隔两个标签显示一个标签，以此类推。</span></span><br><span class="line">            rotate: <span class="string">"30"</span> <span class="comment">// x轴文字旋转角度</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;&#125;,</span><br><span class="line">    series: [] <span class="comment">// C 参数数据放在这里</span></span><br><span class="line">	<span class="comment">// series: [&#123;</span></span><br><span class="line">    <span class="comment">//     name: '累计融资金额',</span></span><br><span class="line">    <span class="comment">//     type: 'bar',</span></span><br><span class="line">    <span class="comment">//     data: [5, 20, 36, 10, 10, 100, 120, 150, 30, 80, 50, 130]</span></span><br><span class="line">    <span class="comment">// &#125;]</span></span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 多元素柱状图模板 A，B处处理数据</span></span><br><span class="line">option2Tpl: &#123;</span><br><span class="line">    legend: &#123;&#125;,</span><br><span class="line">    <span class="comment">// color: ['#3398DB', '#C0504D', '#9BBB59'],</span></span><br><span class="line">    tooltip: &#123;</span><br><span class="line">        trigger: <span class="string">'axis'</span>,</span><br><span class="line">            axisPointer: &#123; <span class="comment">// 坐标轴指示器，坐标轴触发有效</span></span><br><span class="line">            type: <span class="string">'shadow'</span> <span class="comment">// 默认为直线，可选为：'line' | 'shadow'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    grid: &#123; <span class="comment">//直角坐标系内绘图网格</span></span><br><span class="line">        left: <span class="string">'3%'</span>,</span><br><span class="line">        right: <span class="string">'4%'</span>,</span><br><span class="line">        bottom: <span class="string">'3%'</span>,</span><br><span class="line">        containLabel: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    dataset: &#123;</span><br><span class="line">        source: [] <span class="comment">// A 需要展示的数据</span></span><br><span class="line">        <span class="comment">// ['product', '已实现收入', '待收入', '还款'],</span></span><br><span class="line">		<span class="comment">// ['202001', 43.3, 85.8, 93.7],</span></span><br><span class="line">		<span class="comment">// ['202002', 83.1, 73.4, 55.1],</span></span><br><span class="line">		<span class="comment">// ['202003', 86.4, 65.2, 82.5],</span></span><br><span class="line">		<span class="comment">// ['202004', 72.4, 53.9, 39.1],</span></span><br><span class="line">		<span class="comment">// ['202005', 90.4, 30.9, 66.1],</span></span><br><span class="line">    &#125;,</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        type: <span class="string">'category'</span>,</span><br><span class="line">        nameLocation: <span class="string">'end'</span>, <span class="comment">//坐标轴名称显示位置。</span></span><br><span class="line">        axisLabel: &#123; <span class="comment">//坐标轴刻度标签的相关设置。</span></span><br><span class="line">            interval: <span class="number">0</span>,</span><br><span class="line">            rotate: <span class="string">"0"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;&#125;,</span><br><span class="line">    series: [] <span class="comment">// 有几个图生成 几个type</span></span><br><span class="line">    <span class="comment">// series: [</span></span><br><span class="line">	<span class="comment">//     &#123;type: 'bar'&#125;,</span></span><br><span class="line">	<span class="comment">//     &#123;type: 'bar'&#125;,</span></span><br><span class="line">	<span class="comment">//     &#123;type: 'bar'&#125;</span></span><br><span class="line">	<span class="comment">// ]</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 动态生成id，为 ECharts 准备一个具备高宽的 DOM 容器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Col</span> <span class="attr">span</span>=<span class="string">"12"</span> <span class="attr">v-for</span>=<span class="string">"(k, index) in allSelPam"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">"`dom_$&#123;k&#125;`"</span> <span class="attr">style</span>=<span class="string">"height: 320px;width: 100%;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Col</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Row</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>javascript</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在查询方法中，生成图标dom元素 this.selData是选中的参数组成的数组</span></span><br><span class="line"><span class="comment">// 使用固定的 'allCharts' 作为所用参数综合图表的参数</span></span><br><span class="line"><span class="keyword">this</span>.allSelPam = <span class="keyword">this</span>.selData.length &gt; <span class="number">0</span>? [<span class="string">'allCharts'</span>, ...this.selData]: []</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多参数图表</span></span><br><span class="line">setMultipleChart: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> vm = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">let</span> selData = ApiUtils.pureData(vm.selData)</span><br><span class="line">    <span class="keyword">let</span> product = [<span class="string">'product'</span>]</span><br><span class="line">    <span class="keyword">let</span> source = []</span><br><span class="line">    <span class="keyword">let</span> series = []</span><br><span class="line">    <span class="keyword">let</span> chartData = &#123;<span class="attr">allCharts</span>: &#123;&#125;&#125;</span><br><span class="line">    data.forEach(<span class="function">(<span class="params">item, idx</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> yData = [item.loanDate]</span><br><span class="line">        selData.forEach(<span class="function"><span class="params">pam</span> =&gt;</span> &#123;</span><br><span class="line">            yData.push(item[pam])</span><br><span class="line">            <span class="keyword">if</span> (idx === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> tit = ApiUtils.valueToText(pam, <span class="string">'dict'</span>, <span class="string">'BUSINESS_SUM_PAM'</span>)</span><br><span class="line">                product.push(tit)</span><br><span class="line">                series.push(&#123;<span class="attr">type</span>: <span class="string">'bar'</span>&#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        source.push(yData)</span><br><span class="line">    &#125;)</span><br><span class="line">    source.unshift(product)</span><br><span class="line">    <span class="keyword">let</span> option = ApiUtils.pureData(vm.option2Tpl)</span><br><span class="line">    option.dataset.source = source</span><br><span class="line">    option.series = series</span><br><span class="line">    chartData[<span class="string">'allCharts'</span>].option = option</span><br><span class="line">    <span class="keyword">return</span> chartData</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单参数图标</span></span><br><span class="line">setSingleChart: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> vm = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">let</span> chartData = &#123;&#125;</span><br><span class="line">    <span class="keyword">this</span>.selData.forEach(<span class="function"><span class="params">pam</span> =&gt;</span> &#123;</span><br><span class="line">        chartData[pam] = &#123;&#125;</span><br><span class="line">        <span class="keyword">let</span> xData = []</span><br><span class="line">        <span class="keyword">let</span> yData = []</span><br><span class="line">        data.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (item[pam]) &#123;</span><br><span class="line">                yData.push(item[pam])</span><br><span class="line">                xData.push(item.loanDate)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        chartData[pam].option = ApiUtils.pureData(vm.optionTpl)</span><br><span class="line">        <span class="keyword">let</span> tit = ApiUtils.valueToText(pam, <span class="string">'dict'</span>, <span class="string">'BUSINESS_SUM_PAM'</span>)</span><br><span class="line">        chartData[pam].option.legend.data = [tit]</span><br><span class="line">        chartData[pam].option.xAxis.data = xData</span><br><span class="line">        chartData[pam].option.series = [&#123;</span><br><span class="line">            name: tit,</span><br><span class="line">            type: <span class="string">'bar'</span>,</span><br><span class="line">            data: yData</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> chartData</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据视口大小动态变化图表</span></span><br><span class="line">resize() &#123;</span><br><span class="line">    <span class="keyword">this</span>.allSelPam.forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.chartMap.get(key).resize()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化echarts</span></span><br><span class="line">initChart: <span class="function"><span class="keyword">function</span> (<span class="params">chartData</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> vm = <span class="keyword">this</span></span><br><span class="line">    vm.chartMap.clear()</span><br><span class="line">    <span class="built_in">Object</span>.keys(chartData).map(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> chart = <span class="built_in">document</span>.getElementById(<span class="string">`dom_<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">let</span> myChart = echarts.init(chart)</span><br><span class="line">        vm.chartMap.set(key, myChart)</span><br><span class="line">        <span class="comment">// 注意 setOption 参数中的 true 保证了图表能及时更新， 如果不使用true还可以使用</span></span><br><span class="line">        <span class="comment">// myChart.clear() 每次都重新初始化图表，这和setOption中设置true效果一样，否则</span></span><br><span class="line">        <span class="comment">// 数据更新了但是图表没有重绘</span></span><br><span class="line">        myChart.setOption(chartData[key].option, <span class="literal">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    tools.on(<span class="built_in">window</span>, <span class="string">'resize'</span>, vm.resize)</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 在ajax获取数据后初始化图表</span></span><br><span class="line"> <span class="keyword">let</span> option = <span class="keyword">this</span>.setSingleChart(data)</span><br><span class="line"> <span class="keyword">let</span> option2 = <span class="keyword">this</span>.setMultipleChart(data)</span><br><span class="line"> <span class="keyword">let</span> chartOptions = <span class="built_in">Object</span>.assign(&#123;&#125;, option, option2)</span><br><span class="line"> <span class="keyword">this</span>.initChart(chartOptions)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭图表resize</span></span><br><span class="line">beforeDestroy() &#123;</span><br><span class="line">    tools.off(<span class="built_in">window</span>, <span class="string">'resize'</span>, <span class="keyword">this</span>.resize)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>工具方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * tools </span></span><br><span class="line"><span class="comment"> * @description 绑定事件 on(element, event, handler)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> on = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">element, event, handler</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (element &amp;&amp; event &amp;&amp; handler) &#123;</span><br><span class="line">                element.addEventListener(event, handler, <span class="literal">false</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">element, event, handler</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (element &amp;&amp; event &amp;&amp; handler) &#123;</span><br><span class="line">                element.attachEvent(<span class="string">'on'</span> + event, handler)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @description 解绑事件 off(element, event, handler)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> off = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.removeEventListener) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">element, event, handler</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (element &amp;&amp; event) &#123;</span><br><span class="line">                element.removeEventListener(event, handler, <span class="literal">false</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">element, event, handler</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (element &amp;&amp; event) &#123;</span><br><span class="line">                element.detachEvent(<span class="string">'on'</span> + event, handler)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><h4 id="echartsInstance-setOption"><a href="#echartsInstance-setOption" class="headerlink" title="echartsInstance.setOption"></a><a href="https://www.echartsjs.com/zh/api.html#echartsInstance.setOption" target="_blank" rel="noopener">echartsInstance.setOption</a></h4><p>设置图表实例的配置项以及数据，万能接口，所有参数和数据的修改都可以通过 <code>setOption</code> 完成，ECharts 会合并新的参数和数据，然后刷新图表。如果开启<a href="https://www.echartsjs.com/zh/option.html#option.animation" target="_blank" rel="noopener">动画</a>的话，ECharts 找到两组数据之间的差异然后通过合适的动画去表现数据的变化。</p>
<p><strong>注：</strong> ECharts 2.x 中的通过 <code>addData</code> , <code>setSeries</code> 方法设置配置项的方式将不再支持，在 ECharts 3 中统一使用 <code>setOption</code>，可以参考上面示例。</p>
<p><strong>参数：</strong></p>
<ul>
<li><p><code>option</code></p>
<p>图表的配置项和数据，具体见<a href="https://www.echartsjs.com/zh/option.html" target="_blank" rel="noopener">配置项手册</a>。</p>
</li>
<li><p><code>notMerge</code></p>
<p>可选，是否不跟之前设置的 <code>option</code> 进行合并，默认为 <code>false</code>，即合并。</p>
</li>
<li><p><code>lazyUpdate</code></p>
<p>可选，在设置完 <code>option</code> 后是否不立即更新图表，默认为 <code>false</code>，即立即更新。</p>
</li>
<li><p><code>silent</code></p>
<p>可选，阻止调用 <code>setOption</code> 时抛出事件，默认为 <code>false</code>，即抛出事件。</p>
</li>
</ul>
</div><div class="tags"><a href="/tags/echarts/">echarts</a></div><div class="post-nav"><a class="pre" href="/2020/02/27/download-excel/">vue前端调后台接口下载excel文件</a><a class="next" href="/2020/01/11/book-masike/">读书笔记 -《硅谷钢铁侠》</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="jiangleiundo.github.io"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Demo/">Demo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mood/">Mood</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Study/">Study</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/mongoose/" style="font-size: 15px;">mongoose</a> <a href="/tags/Node/" style="font-size: 15px;">Node</a> <a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/Gzip/" style="font-size: 15px;">Gzip</a> <a href="/tags/Promise/" style="font-size: 15px;">Promise</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/book/" style="font-size: 15px;">book</a> <a href="/tags/carousel/" style="font-size: 15px;">carousel</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/reg/" style="font-size: 15px;">reg</a> <a href="/tags/Echarts/" style="font-size: 15px;">Echarts</a> <a href="/tags/express/" style="font-size: 15px;">express</a> <a href="/tags/valid/" style="font-size: 15px;">valid</a> <a href="/tags/iview/" style="font-size: 15px;">iview</a> <a href="/tags/Components/" style="font-size: 15px;">Components</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/Express/" style="font-size: 15px;">Express</a> <a href="/tags/Tool/" style="font-size: 15px;">Tool</a> <a href="/tags/todomvc/" style="font-size: 15px;">todomvc</a> <a href="/tags/reactJS/" style="font-size: 15px;">reactJS</a> <a href="/tags/Vscode/" style="font-size: 15px;">Vscode</a> <a href="/tags/Router/" style="font-size: 15px;">Router</a> <a href="/tags/Mock/" style="font-size: 15px;">Mock</a> <a href="/tags/Vuex/" style="font-size: 15px;">Vuex</a> <a href="/tags/babel/" style="font-size: 15px;">babel</a> <a href="/tags/router/" style="font-size: 15px;">router</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/mint-ui/" style="font-size: 15px;">mint-ui</a> <a href="/tags/echarts/" style="font-size: 15px;">echarts</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/flex/" style="font-size: 15px;">flex</a> <a href="/tags/cms/" style="font-size: 15px;">cms</a> <a href="/tags/小程序/" style="font-size: 15px;">小程序</a> <a href="/tags/Github/" style="font-size: 15px;">Github</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/08/02/github-favourite/">常用轻量级插件和库</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/01/vuex-modules/">vuex中modules的用法</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/01/live-select/">一个基于iview的下拉组件</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/26/vscode-use/">vscode实用插件</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/20/vue-keep-alive/">keep-alive</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/11/vuex-async/">vuex一个使用实例</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/24/vue-directive/">vue常用的自定义指令</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/22/vue-mock/">vue-mock</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/07/vue-live-components/">vue动态组件的加载</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/26/tool-use-github-gitee/">同时使用github和码云</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/tufu9441/maupassant-hexo" title="hexo-maupassant" target="_blank">hexo-maupassant</a><ul></ul><a href="https://github.com/jiangleiundo" title="我的GitHub" target="_blank">我的GitHub</a><ul></ul><a href="https://www.cnblogs.com/codebook/" title="博客园" target="_blank">博客园</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">小方块的世界.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>